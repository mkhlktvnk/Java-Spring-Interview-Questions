# Какие есть виды индексов в PostgreSQL?
1. B-tree (default index) - сбалансированное дерево поиска
2. Hash-index
3. Gist - обобщенное дерево поиска
4. Gin - обобщённый обратный индекс
5. SP-Gist - Gist с двоичным разделением пространства
6. BRin - блочно-диапазонный

# Расскжаите про B-tree index
B-tree index - это структура данных, которая представляет из себя сбалансированное дерево. 
Он обеспечивает O(log(n)) время доступа.

- B-tree индекс создается по умолчанию при создании индекса, а также при использовании PRIMARY KEY & UNIQUE constraint.
- Поддерживает операторы >, <, >=, <=, =
- Поддерживает `LIKE 'abc%'`, но не `LIKE '%abc'`
- Индексирует NULL
- Сложность поиска O(log(n))

# Расскажите про Hash-index
Хэш-индекс хранит 32-битное значение хэша индексируемого столбца и индексируемый столбец (Hash-map).
Этот вид индексов поддерживает только операцию сравнения (=).
Планировщик запросов выберет для использования хэш индекс только тогда, когда индексируемый столбец будет фильтроваться только используя операцию строгого сравнения (=).

- поддерживает только оператор строго сравнения
- применяется планировщиком только при сравнению по строгому равенству
- не отражается в журнале предзаписи WAL
- Сложность поиска O(1)

# Расскажите про Gist-index
Представляет из себя R-tree - обычное упорядоченное дерево, которое позволяет задать способ распределения данных на основе собственного сравнения.
Применяется для индексации сложных данных (геометрических, пространственных и т.д.)
Например, с помощью Gist можно производить индексацию по пространственных данных, которые могут сравниваться по взаимному расположению (Находится слева, находится справа и т.д.)

- Gist-index представляет из себя сбалансированное дерево, которое состоит из узлов-страниц.
- Каждый узел состоит из индексных записей.
- Каждая запись листового узла содержит внутри себя предикат (некоторое логическое выражение для сравнения) и ссылку на индексируемые данные, которые должны соответствовать этому предикату.
- Каждая запись дочернего узла также содержит внутре себя предикат и ссылку на дочерний узел, причем все данные дочернего поддерева должны соответствовать этому предикату.
- Поиск по Gist-индексу происходит по функции согласованности - функция, которая определяет общий интерфейс для сравнения и реализуется различным способом для разных данных.
- При вставке нового значения в Gist для него выбирается такая родительская запись, предикат которой приходится не расширять вовсе или расширять минимально.
- При удалении значения из Gist предикат родительской записи не сужается, это происходит только при полном перестроении индекса (reindex или vacuum full)
- Применяется для хранения точек (геометрия, геоданные), интервалов и полнотекстового поиска
- Сложность доступа O(log(n))

# Расскажите про SP-Gist индекс
Метод доступа SP-Gist предполагает разбиение некоторой области значений на неперекрывающиеся интервалы, которые также могут быть разбиты.
Может быть реализован с помощью дерева квадратантов, k-мерных деревьев и префиксных деревьев.

- SP-Gist представляет из себя несбалансированное дерево.
- Внутренний узел хранит в себе ссылки на дочерние узлы, для каждой ссылки может быть задана метка, таже может хранить префикс для дочернего узла, который зачастую является предикатом
- Листовые узлы содержат индексируемые данные и ссылку на строку, листовые узлы могут объединяться в списки
- Использует для поиска функцию согласованности
- Имеет небольшое ветвение и из-за этого используется в оперативной памяти, а не на диске

# Расскажите про Gin индекс
Gin-индекс представляет из себя структуру данных ключ-значение, которая в качестве ключа используется какой-то элемент, а в качестве значения - записи, в которых этот элемент встречается.
Можно провести аналог с алфавитным указателем в конце книги, где термин и список страниц, на которых он встречается.

- хранится в виде B-tree
- к каждому элементу привязан набор ссылок на записи в таблице, в которых этот элемент встречается.
- используется для полнотекстового поиска